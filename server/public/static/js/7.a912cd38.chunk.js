(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[7],{121:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return L}));var a=s(12),r=s.n(a),c=s(102),n=s(111),o=s(38),i=s(27),l=s(3),d=s(1),j=s(125),u=s(119),b=s(123),h=s(124),O=s(101),p=s(16),m=s(50),x=s.n(m),f=s(116),v=s(28),g=s(36),C={isLoading:!1,todos:[],error:null},y="ASYNC_START",k="GET_TODOS_SUCCESS",T="GET_TODOS_FAILED",w="ADD_TODO_SUCCESS",S="COMPLETE_TODO_SUCCESS",N="DELETE_TODO_SUCCESS";function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case k:return{isLoading:!1,todos:t.todos,error:null};case T:return{isLoading:!1,todos:[],error:t.error};case w:return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1,todos:e.todos.concat([t.todo])});case S:var s=Object(o.a)(e.todos),a=s.findIndex((function(e){return e.id===t.todoId}));return s[a].completed=!0,Object(i.a)(Object(i.a)({},e),{},{todos:s,isLoading:!1});case N:return Object(i.a)(Object(i.a)({},e),{},{todos:e.todos.filter((function(e){return e.id!==t.todoId})),isLoading:!1});default:return e}}function L(){var e=Object(d.useReducer)(E,C),t=Object(n.a)(e,2),s=t[0],a=t[1],o=s.isLoading,i=s.error,m=s.todos,L=Object(d.useState)(!1),D=Object(n.a)(L,2),z=D[0],_=D[1],I=Object(d.useState)(!1),A=Object(n.a)(I,2),B=A[0],G=A[1],H=Object(d.useState)(),U=Object(n.a)(H,2),F=U[0],q=U[1],J=Object(p.c)((function(e){return e.auth})).token,R=Object(O.a)(),Y=R.register,M=R.errors,P=R.handleSubmit,K=Y({required:{value:!0,message:"Title is required"},minLength:{value:5,message:"Title must have at least 5 chars"},maxLength:{value:100,message:"Title must have at most 100 chars"}}),Q=Y({minLength:{value:5,message:"Description must have at least 5 chars"},maxLength:{value:255,message:"Description must have at most 255 chars"}}),V=Object(d.useCallback)(Object(c.a)(r.a.mark((function e(){var t,s,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:y}),e.prev=1,e.next=4,v.a.get("/todos",{headers:{Authorization:"Bearer ".concat(J)}});case 4:t=e.sent,s=t.data,a({type:k,todos:s}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),c=e.t0.response?e.t0.response.data.message:e.t0.message,a({type:T,error:c});case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),[J]);Object(d.useEffect)((function(){V()}),[V]);var W=Object(d.useCallback)((function(){_(!0)}),[]),X=Object(d.useCallback)((function(){_(!1)}),[]),Z=Object(d.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t,s){var c,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),a({type:y}),e.prev=2,e.next=5,v.a.post("/todos",t,{headers:{Authorization:"Bearer ".concat(J)}});case 5:c=e.sent,n=c.data,a({type:w,todo:n}),X(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),o=e.t0.response?e.t0.response.data.message:e.t0.message,x.a.fire("Error!",o,"error");case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,s){return e.apply(this,arguments)}}(),[J,X]),$=Object(d.useCallback)((function(e){G(!0),q(e)}),[]),ee=Object(d.useCallback)((function(){G(!1)}),[]),te=Object(d.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:y}),e.prev=1,e.next=4,v.a.patch("/todos/".concat(t,"/complete"),{},{headers:{Authorization:"Bearer ".concat(J)}});case 4:a({type:S,todoId:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),s=e.t0.response?e.t0.response.data.message:e.t0.message,x.a.fire("Error!",s,"error");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[J]),se=Object(d.useCallback)(function(){var e=Object(c.a)(r.a.mark((function e(t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:y}),e.prev=1,e.next=4,v.a.delete("/todos/".concat(t),{headers:{Authorization:"Bearer ".concat(J)}});case 4:a({type:N,todoId:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),s=e.t0.response?e.t0.response.data.message:e.t0.message,x.a.fire("Error!",s,"error");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[J]),ae=null;return ae=o?Object(l.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(l.jsx)(g.a,{})}):i?Object(l.jsxs)(j.a,{variant:"danger",children:["Error: ",i]}):m.length?Object(l.jsx)("ul",{className:"list-group",children:m.map((function(e){return Object(l.jsxs)("li",{className:"list-group-item d-flex align-items-center justify-content-between",children:[Object(l.jsx)("span",{children:e.title}),Object(l.jsxs)("div",{children:[!e.completed&&Object(l.jsx)(u.a,{size:"sm p-1",variant:"success",title:"Complete",onClick:function(){return te(e.id)},children:Object(l.jsx)(f.b,{size:20})}),Object(l.jsx)(u.a,{size:"sm p-1 mx-1",variant:"primary",title:"Info",onClick:function(){return $(e)},children:Object(l.jsx)(f.c,{size:20})}),Object(l.jsx)(u.a,{size:"sm p-1",variant:"danger",title:"Delete",onClick:function(){return se(e.id)},children:Object(l.jsx)(f.a,{size:20})})]})]},e.id)}))}):Object(l.jsx)(j.a,{variant:"secondary",children:"No Todos Yet"}),Object(l.jsx)("section",{className:"my-4 container",children:Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-12",children:Object(l.jsx)("div",{className:"card rounded-lg",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(l.jsx)("h2",{className:"h3 text-primary",children:"Todos"}),Object(l.jsx)(u.a,{variant:"success",onClick:W,children:"New"})]}),ae]})})}),Object(l.jsxs)(b.a,{show:z,onHide:X,children:[Object(l.jsx)(b.a.Header,{closeButton:!0,children:Object(l.jsx)(b.a.Title,{children:"Create Todo"})}),Object(l.jsxs)(h.a,{onSubmit:P(Z),children:[Object(l.jsxs)(b.a.Body,{children:[Object(l.jsxs)(h.a.Group,{controlId:"title",children:[Object(l.jsx)(h.a.Label,{children:"Title"}),Object(l.jsx)(h.a.Control,{name:"title",ref:K,placeholder:"Todo Title"}),M.title&&Object(l.jsx)("span",{style:{fontSize:"0.8em"},className:"text-danger font-weight-bolder",children:M.title.message})]}),Object(l.jsxs)(h.a.Group,{controlId:"description",children:[Object(l.jsx)(h.a.Label,{children:"Description"}),Object(l.jsx)(h.a.Control,{as:"textarea",name:"description",ref:Q,placeholder:"Todo Description"}),M.description&&Object(l.jsx)("span",{style:{fontSize:"0.8em"},className:"text-danger font-weight-bolder",children:M.description.message})]})]}),Object(l.jsxs)(b.a.Footer,{children:[Object(l.jsx)(u.a,{variant:"secondary",onClick:X,children:"Close"}),Object(l.jsx)(u.a,{type:"submit",variant:"success",disabled:o,children:"Create"})]})]})]}),Object(l.jsxs)(b.a,{show:B,onHide:ee,children:[Object(l.jsx)(b.a.Header,{closeButton:!0,children:Object(l.jsx)(b.a.Title,{children:"Todo Info"})}),Object(l.jsxs)(b.a.Body,{children:[Object(l.jsx)("p",{className:"text-muted mb-1 font-weight-bolder",children:"Title"}),Object(l.jsx)("p",{children:null===F||void 0===F?void 0:F.title}),Object(l.jsx)("p",{className:"text-muted mb-1 font-weight-bolder",children:"Description"}),Object(l.jsx)("p",{children:null===F||void 0===F?void 0:F.description}),Object(l.jsx)("p",{className:"text-muted mb-1 font-weight-bolder",children:"Status"}),(null===F||void 0===F?void 0:F.completed)?Object(l.jsx)("p",{className:"text-success font-weight-bolder",children:"Completed"}):Object(l.jsx)("p",{className:"text-danger font-weight-bolder",children:"Open"})]}),Object(l.jsx)(b.a.Footer,{children:Object(l.jsx)(u.a,{variant:"primary",onClick:ee,children:"Close"})})]})]})})}}}]);
//# sourceMappingURL=7.a912cd38.chunk.js.map